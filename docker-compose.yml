services:
    books: 
        image: "${DOCKER_USERNAME}/books:latest"
        ports:
            - "8081:8081"
        networks:
          docker-ms:
            aliases:
              - books
        deploy:
          replicas: 1
          restart_policy:
            condition: on-failure
          placement:
            constraints:
              - node.labels.role == apis
            
networks:
  docker-ms:
    external: true